window.sliced=window.sliced||{},function(){function e(){function t(e,t,n,r,i,s,o){var u;try{o||(u=e.sData.experiments_rules[t+"_exps"][n],u||(t=t=="g"?"l":"g",u=e.sData.experiments_rules[t+"_exps"][n]),o=u?u.layer:"obsolete"),this.expType=t,this.expId=n,this.varId=r,this.expTime=i.toString(),this.isFirstExposure=s,this.layer=o}catch(a){e.logErrorToServer("Experiment",a,"expIdStr: "+n,50)}}function r(e){try{try{sliced.SlicedHelpers.initJQCookie()}catch(r){e.logErrorToServer("initJQCookie",r,"",2);return}sliced.SlicedData=sliced.SlicedData||sliced.SlicedDataStub,sliced.SlicedClient=e,sliced.SlicedEditor=n,sliced.Experiment=t;if(e.isExcludedUser())return;sliced.markEvent=jQuery.proxy(e.markEvent,e),sliced.markKpi=jQuery.proxy(e.markKpi,e);if(sliced.testMode==1)return;e.init(),e.run()}catch(r){e.logErrorToServer("runMainFlow",r,"",2)}}sliced.SlicedData={experiments_rules:{last_modified:1400509903,modulus_by:100,g_alloc_sum:0,g_exps:{},l_exps:{149:{auto_allocation:!1,tr_allocation:20,var_allocation:{1:[0,49],2:[50,99]},match_type:"page_tag",match:"browsing-history",layer:"fe",start_time:1398594946},159:{auto_allocation:!0,tr_allocation:100,var_allocation:{1:[0,49],2:[50,99]},match_type:"page_id",match:"ios_aa_test",layer:"ios",start_time:1398598861,tr_alc:[0,99],var_groups:{1:[0,49],2:[50,99]}},180:{auto_allocation:!0,tr_allocation:100,var_allocation:{1:[0,49],2:[50,99]},match_type:"page_id",match:"android_aa_test",layer:"ios",start_time:1399268003,tr_alc:[0,99],var_groups:{1:[0,49],2:[50,99]}},189:{auto_allocation:!0,tr_allocation:100,var_allocation:{1:[0,49],2:[50,99]},match_type:"page_id",match:"users#new",layer:"be",start_time:1400428068},190:{auto_allocation:!0,tr_allocation:100,var_allocation:{1:[0,49],2:[50,99]},match_type:"page_id",match:"gigs#show",layer:"fe",start_time:1400484506},191:{auto_allocation:!0,tr_allocation:34,var_allocation:{1:[0,49],2:[50,99]},match_type:"page_id",match:"categories#all",layer:"fe",start_time:1400509801},195:{auto_allocation:!0,tr_allocation:100,var_allocation:{1:[0,49],2:[50,99]},match_type:"loose",match:"fiverr.com/join",layer:"fe",start_time:1399900749},196:{auto_allocation:!0,tr_allocation:100,var_allocation:{1:[0,49],2:[50,99]},match_type:"page_id",match:"android_share_button",layer:"ios",start_time:1400427861,tr_alc:[0,99],var_groups:{1:[0,49],2:[50,99]}},198:{auto_allocation:!0,tr_allocation:100,var_allocation:{1:[0,49],2:[50,99]},match_type:"page_id",match:null,layer:"be",start_time:1400412933},199:{auto_allocation:!0,tr_allocation:33,var_allocation:{1:[0,49],2:[50,99]},match_type:"page_id",match:"categories#all",layer:"be",start_time:1400143534},200:{auto_allocation:!0,tr_allocation:100,var_allocation:{1:[0,49],2:[50,99]},match_type:"page_id",match:"search#gigs",layer:"be",start_time:1400412254},202:{auto_allocation:!0,tr_allocation:33,var_allocation:{1:[0,49],2:[50,99]},match_type:"page_id",match:"categories#all",layer:"be",start_time:1400419250},204:{auto_allocation:!0,tr_allocation:100,var_allocation:{1:[0,49],2:[50,99]},match_type:"page_id",match:"mobile_order_confirmation",layer:"ios",start_time:1400502972,tr_alc:[0,99],var_groups:{1:[0,49],2:[50,99]}}},g_exps_per_resource:{exact:{},loose:{},page_id:{},page_tag:{}},l_exps_per_resource:{exact:{},loose:{"fiverr.com/join":["195"]},page_id:{ios_aa_test:["159"],android_aa_test:["180"],"users#new":["189"],"users#track_captcha":["189"],"gigs#show":["190"],"categories#all":["191","199","202"],android_share_button:["196"],"":[],"search#gigs":["200"],"gigs#endless_page_as_json":["202"],mobile_order_confirmation:["204"]},page_tag:{"browsing-history":["149"]}},be_g_exps_per_resource:{exact:{},loose:{},page_id:{},page_tag:{}},fe_g_exps_per_resource:{exact:{},loose:{},page_id:{},page_tag:{}},ios_g_exps_per_resource:{exact:{},loose:{},page_id:{},page_tag:{}},be_l_exps_per_resource:{exact:{},loose:{},page_id:{"users#new":["189"],"users#track_captcha":["189"],"categories#all":["199","202"],"search#gigs":["200"],"gigs#endless_page_as_json":["202"]},page_tag:{}},fe_l_exps_per_resource:{exact:{},loose:{"fiverr.com/join":["195"]},page_id:{"gigs#show":["190"],"categories#all":["191"]},page_tag:{"browsing-history":["149"]}},ios_l_exps_per_resource:{exact:{},loose:{},page_id:{ios_aa_test:["159"],android_aa_test:["180"],android_share_button:["196"],mobile_order_confirmation:["204"]},page_tag:{}},be_tr_alc_per_resource:{page_id:{"users#new":{189:[0,99]},"users#track_captcha":{189:[0,99]},"categories#all":{199:[0,49],202:[50,99]},"search#gigs":{200:[0,99]},"gigs#endless_page_as_json":{202:[0,99]}}}},experiments_data:{149:{1:{custom_css:"",custom_js:" jQuery(document).ready(function () {jQuery(document.body).on('click','.history-gig-image, .history-gig-title', function(event) { \n        sliced.markEvent({\n            'eventName': 'history-gig-click',\n            'expId': '149',\n            'varId': '1'\n        });\n    });});"},2:{custom_css:"",custom_js:"$(document).ready(function(){\n  if (typeof FiverrGigListings != 'undefined') {\n      FiverrGigListings.abBrowsingHistory = true;   \n  }\n}); jQuery(document).ready(function () {jQuery(document.body).on('click','.history-gig-image, .history-gig-title', function(event) { \n        sliced.markEvent({\n            'eventName': 'history-gig-click',\n            'expId': '149',\n            'varId': '2'\n        });\n    });});"}},159:{1:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"},2:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"}},180:{1:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"},2:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"}},189:{1:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"},2:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"}},190:{1:{custom_css:"",custom_js:" jQuery(document).ready(function () {jQuery(document.body).on('click','input[type=\"submit\"].js-gig-price', function(event) { \n        sliced.markEvent({\n            'eventName': 'order-now-clicked',\n            'expId': '190',\n            'varId': '1'\n        });\n    });jQuery(document.body).on('click','.mp-rec-gigs .js-gallery-nav.nav-next', function(event) { \n        sliced.markEvent({\n            'eventName': 'carousel-next-clicked',\n            'expId': '190',\n            'varId': '1'\n        });\n    });jQuery(document.body).on('click','.mp-recommended-gigs .gig-item', function(event) { \n        sliced.markEvent({\n            'eventName': 'recommended-gig-clicked',\n            'expId': '190',\n            'varId': '1'\n        });\n    });});"},2:{custom_css:".mp-recommended-gigs {\n  display: block !important;\n}",custom_js:"$(document).ready(function(){\n  if (typeof FiverrGigListings != 'undefined') {\n      FiverrGigListings.gigPageRecAb = true;   \n  }\n}); jQuery(document).ready(function () {jQuery(document.body).on('click','input[type=\"submit\"].js-gig-price', function(event) { \n        sliced.markEvent({\n            'eventName': 'order-now-clicked',\n            'expId': '190',\n            'varId': '2'\n        });\n    });jQuery(document.body).on('click','.mp-rec-gigs .js-gallery-nav.nav-next', function(event) { \n        sliced.markEvent({\n            'eventName': 'carousel-next-clicked',\n            'expId': '190',\n            'varId': '2'\n        });\n    });jQuery(document.body).on('click','.mp-recommended-gigs .gig-item', function(event) { \n        sliced.markEvent({\n            'eventName': 'recommended-gig-clicked',\n            'expId': '190',\n            'varId': '2'\n        });\n    });});"}},191:{1:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"},2:{custom_css:'.mp-box.mp-box-white {\ndisplay: none;\n}\n\n.mp-footer-search {\nbackground: inherit !important;\npadding-top: 40px;\n}\n\n.blog-tmp-container {\n background: #eee url("//d2nt7j7ljjsiah.cloudfront.net/assets/v2_backgrounds/bg-footer-search-grey-bot-5759f349ebf4614cf2a86889d884f189.png") repeat-x top center;\npadding-top: 40px;\nmargin-top: -20px !important;\n}\n\n.mp-blog-posts h2 small em {\nbackground: #eee;\n}\n',custom_js:'$( document ).ready(function() {\n   $("<section class=\'mp-container blog-tmp-container container-fluid\'/>" ).insertBefore( ".mp-footer-search" );\n   $(".mp-blog-posts").appendTo(".blog-tmp-container");\n}); jQuery(document).ready(function () {});'}},195:{1:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"},2:{custom_css:".main-header .main-nav\n{\n   display:none;\n}\n\n.main-category-search\n{\n  display:none;\n}\n\n.main-footer\n{\n  display:none;\n}\n\n.mp-footer-logos\n{\n  display:none;\n}\n\nbody\n{\n  background-color:#f7f7f7;\n}\n\n",custom_js:"$('#main-wrapper').css('padding-top', '60px'); jQuery(document).ready(function () {});"}},196:{1:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"},2:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"}},198:{1:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"},2:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"}},199:{1:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"},2:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"}},200:{1:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"},2:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"}},202:{1:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"},2:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"}},204:{1:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"},2:{custom_css:"",custom_js:" jQuery(document).ready(function () {});"}}},general_data:{sliced_token:"ee31d19e9787575b44da1e18ad38e86d",sliced_api_host:"sliced-api.fiverr.com/api/v1"}};var e={PUID_KEY:"slc_p_uid",PRIOR_EXPOSURES_KEY:"slc_xpmnts",FUTURE_ALLOCATION_KEY:"slc_future_alc",POST_ACTIVITY_PATH:"/participants/{pid}/activity",COOKIE_GLOBAL_DELIMITER:"~",COOKIE_EXPS_DELIMITER:"|",ERROR_LOGGING_PERCENTAGE:10,CORRUPTED_COOKIE_PATTERN:"|~~~|",EXCLUDED_USER_AGENTS:["MSIE 6.0","MSIE 7.0","Googlebot","AdsBot","bing","msn","MSRBOT","Slurp","Baidu"],DELETE_OBSOLETE_EXPIRATION:864e5,MAX_RAND:1e3,EXPOSURES_STORAGE_KEY:"slicedExposuresQueue",EVENTS_STORAGE_KEY:"slicedEventsQueue",LAST_PAGE_DATA_KEY:"slicedLastPageData",FE_LAYER:"fe",BE_LAYER:"be",GLOBAL_TYPE:"g",LOCAL_TYPE:"l",slicedToken:"",uPUId:null,mPUId:null,priorExposuresStr:null,priorExposuresJson:{},existingFutureExp:{empty:!0,expType:null,expObject:null},futureExpUpdate:{empty:!0,expType:null,expObject:null},isFirstPUIdAllocation:!1,currPageId:null,pageTags:null,currExperiments:[],currExperimentsHash:{},lastPageData:{pageId:"",href:"",experiments:[]},firstExposureExperiments:[],isPreview:!1,isEditorMode:!1,sData:null,excludeUserFromReport:!1,burnedExps:{},href:null,disregardUser:!1,supportsLocalStorage:!0,hasPriorGlobal:!1,hasPriorLocal:!1,init:function(){this.initWindowBasedFields(),this.initJsonDataFields(),this.initUrlBasedFields(),this.isEditorMode&&n.init(),this.initCookieBasedFields(),this.initIndependentFields()},markEvent:function(e){this.markHelper(e,"mark_event")},markKpi:function(e){this.markHelper(markEventArgs,"mark_kpi")},run:function(){if(this.disregardUser)return;if(!this.isEditorMode){this.decideCurrExperiments(),this.runExperimentsScript(),this.updateCriticalStorage();if(this.disregardUser)return;sliced.testMode?this.runAfterCode():jQuery(window).load(function(){this.runAfterCode()}.bind(this))}},isExcludedUser:function(){try{var e=sliced.SlicedHelpers.getUserAgent();if(!e)return!0;for(var t=0;t<this.EXCLUDED_USER_AGENTS.length;t++)if(e.indexOf(this.EXCLUDED_USER_AGENTS[t])>-1)return!0;return!1}catch(n){return this.logErrorToServer("isExcludedUser",n,"",100),!0}},initWindowBasedFields:function(){try{this.currPageId=sliced.pageId,this.pageTags=sliced.pageTags||[],this.sData=sliced.SlicedData;if(typeof localStorage=="undefined"||!localStorage)this.supportsLocalStorage=!1,this.excludeUserFromReport=!0;localStorage.testKey="testValue"}catch(e){this.disregardUser=!0}},initJsonDataFields:function(){this.slicedToken=this.sData.general_data.sliced_token},initUrlBasedFields:function(){var e=window.location.search.toLowerCase();this.href=window.location.href;if(e.indexOf("sliced_mode")>-1){var n=this._loadPageVar(e,"sliced_mode"),r,i,s,o,u;n=="preview"?(this.isPreview=!0,this.excludeUserFromReport=!0,r=this._loadPageVar(e,"experiment"),i=this._loadPageVar(e,"variation"),s=this.LOCAL_TYPE,o=new t(this,s,r,i,this.getCurrTimeInSecs(),!1),this.currExperiments.push(o)):n=="impersonate"?(this.excludeUserFromReport=!0,r=this._loadPageVar(e,"experiment"),i=this._loadPageVar(e,"variation"),s=this._loadPageVar(e,"experiment_type"),u=this._loadPageVar(e,"experiment_layer"),r&&i&&s&&u&&u==this.FE_LAYER&&(o=new t(this,s,r,i,this.getCurrTimeInSecs(),!1,u),this._setCookie(this.PRIOR_EXPOSURES_KEY,this.convertExpObjectToStr(o)))):n=="editor"&&(this.isEditorMode=!0,this.excludeUserFromReport=!0)}},initCookieBasedFields:function(){try{if(this.isEditorMode||this.isPreview)return;this.parsePriorExposures(),this.parseFutureAllocation(),this.parseParticipantCookie()}catch(e){this.disregardUser=!0,this.logErrorToServer("initCookieBasedFields",e,"",2)}},initIndependentFields:function(){try{this.mPUId=this.generateMPUId()}catch(e){this.disregardUser=!0,this.logErrorToServer("initIndependentFields",e,"",100)}},decideCurrExperiments:function(){try{if(this.isPreview||this.isEditorMode)return;var e,t,n,r,i;e=this.findMatches(this.FE_LAYER),t=this.findMatches(this.BE_LAYER),r=this.findMatchingPriors(e),i=this.findMatchingPriors(t),this.currExperiments=this.currExperiments.concat(r.matches),this.currExperiments=this.currExperiments.concat(i.matches),r.matches.length==0&&!this.hasPriorGlobal&&(n=this.decideExpHelper(r.matchesArrsNoPriors),n.length>0&&(this.currExperiments=this.currExperiments.concat(n),this.firstExposureExperiments=n)),this.updateCurrExperimentsHash()}catch(s){this.disregardUser=!0,this.logErrorToServer("decideCurrExperiments",s,"",2)}},updateCurrExperimentsHash:function(){for(var e in this.currExperiments){var t=this.currExperiments[e];this.currExperimentsHash[t.expId]=t}},decideExpHelper:function(e){var t=[],n=this.sData.experiments_rules.g_alloc_sum,r=this.getModulusNum(),i;try{i=this.checkFutureAllocation(e),i.preAllocatedToGlobal?i.matchingGlobal&&t.push(i.matchingGlobal):r>=n||i.preAllocatedToLocal?t=this.decideLocalExp(e.l):t=this.decideGlobalExp(e.g,r)}catch(s){this.logErrorToServer("decideExpHelper",s,"modNum: "+r,100)}return t},getModulusNum:function(){var e=this.sData.experiments_rules.modulus_by;return this.mPUId%e},checkFutureAllocation:function(e){var n={preAllocatedToLocal:!1,preAllocatedToGlobal:!1,matchingGlobal:null};if(!this.existingFutureExp.empty)if(this.existingFutureExp.expType==this.GLOBAL_TYPE){n.preAllocatedToGlobal=!0;var r=this.existingFutureExp.expObject;jQuery.inArray(r.expId,e.g)>-1&&(n.matchingGlobal=new t(this,r.expType,r.expId,r.varId,this.getCurrTimeInSecs(),!0,r.layer))}else n.preAllocatedToLocal=!0;return n},decideGlobalExp:function(e,t){var n=this.findGlobalDraw(t),r=[];return n&&jQuery.inArray(n.expId,e)>-1&&n.layer==this.FE_LAYER?r.push(n):(this.futureExpUpdate.empty=!1,this.futureExpUpdate.expType=this.GLOBAL_TYPE,this.futureExpUpdate.expObject=n),r},decideLocalExp:function(e){var n=this.sData.experiments_rules,r=parseInt(100/e.length),i,s=[],o=[],u=0,a=0,f,l,c=this.expTypeKey(this.LOCAL_TYPE),h=[];f=this.getRandNum();if(e.length==0)this.futureExpUpdate.empty=!1,this.futureExpUpdate.expType=this.LOCAL_TYPE;else{for(var p in e){var d=e[p],v=n[c][d].auto_allocation;v?(s.push(d),i=r):(o.push(d),i=Math.min(r,n[c][d].tr_allocation)),a+=i;if(f<a){var m=this.drawVarId(this.LOCAL_TYPE,d);l=new t(this,this.LOCAL_TYPE,d,m,this.getCurrTimeInSecs(),!0),h.push(l);break}u+=i}if(!l&&a<100&&s.length>0){var g=this.getRandIndex(s.length),d=s[g],m=this.drawVarId(this.LOCAL_TYPE,d);l=new t(this,this.LOCAL_TYPE,d,m,this.getCurrTimeInSecs(),!0),h.push(l)}}return h},getRandNum:function(){return Math.floor(Math.random()*100)},getRandIndex:function(e){return Math.floor(Math.random()*e)},drawVarId:function(e,t){var n=this.sData.experiments_rules,r=n[this.expTypeKey(e)][t].var_allocation,i=this.getRandNum();for(var s in r){var o=r[s];if(i>=o[0]&&i<=o[1])return s}},findGlobalDraw:function(e){try{var n=this.sData.experiments_rules[this.expTypeKey(this.GLOBAL_TYPE)];for(var r in n){var i=n[r].tr_alc;if(e>=i[0]&&e<=i[1]){var s=n[r].var_groups;for(var o in s){var u=s[o],a;if(e>=u[0]&&e<=u[1])return a=new t(this,this.GLOBAL_TYPE,r,o,this.getCurrTimeInSecs(),!0),a}}}this.logErrorToServer("findGlobalDraw didnt find any global experiment","","modNum: "+e,100)}catch(f){this.logErrorToServer("findGlobalDraw",f,"modNum: "+e,100)}},runExperimentsScript:function(){if(this.disregardUser)return;try{var e="",t="";for(var n in this.currExperiments){var r=this.sData.experiments_data[this.currExperiments[n].expId][this.currExperiments[n].varId];e+=r.custom_css+"\n",t+=r.custom_js+"\n"}this.addJsAndCssOnTheFly(e,t)}catch(i){this.logErrorToServer("runExperimentsScript",i,"",1)}},updateCriticalStorage:function(){try{if(this.disregardUser||this.isPreview)return;this.isFirstPUIdAllocation&&this.setPuidCookie(this.uPUId,this.mPUId),this.updateCriticalStorageForExposures(),this.ManageFutureCookie(),this.updatePageDataStorage()}catch(e){this.disregardUser=!0,this.logErrorToServer("updateCriticalStorage",e,"",1)}},updateCriticalStorageForExposures:function(){if(this.firstExposureExperiments.length>0){for(var e in this.firstExposureExperiments){var t=this.firstExposureExperiments[e];this.enqueueExposure(t),this.priorExposuresJson[t.expType][t.expId]=t}this.updatePriorsCookie()}},ManageFutureCookie:function(){!this.existingFutureExp.empty&&this.currExperiments.length>0?jQuery.removeCookie(this.FUTURE_ALLOCATION_KEY):this.futureExpUpdate.empty||(this.futureExpUpdate.expType==this.LOCAL_TYPE?this._setCookie(this.FUTURE_ALLOCATION_KEY,"l"):this._setCookie(this.FUTURE_ALLOCATION_KEY,this.convertExpObjectToStr(this.futureExpUpdate.expObject)))},updatePageDataStorage:function(){if(!this.supportsLocalStorage)return;var e,t=localStorage[this.LAST_PAGE_DATA_KEY];t&&(this.lastPageData=JSON.parse(t)),e={pageId:this.currPageId,href:this.href,experiments:this.currExperiments},localStorage[this.LAST_PAGE_DATA_KEY]=JSON.stringify(e)},updatePriorsCookie:function(){this.priorExposuresStr=this.constructPriorsStrFromJson(this.priorExposuresJson),this._setCookie(this.PRIOR_EXPOSURES_KEY,this.priorExposuresStr)},runAfterCode:function(){try{if(this.disregardUser||this.isPreview)return;this.checkCorruptedCookie(),this.updateObsoleteExposures()&&this.updatePriorsCookie(),this.updateObsoleteFutureCookie();if(this.disregardUser)return;this.dispatchExposures(),this.dispatchMarkedEvents()}catch(e){this.disregardUser=!0,this.logErrorToServer("runAfterCode",e,"",100)}},checkCorruptedCookie:function(){try{this.priorExposuresStr&&this.priorExposuresStr.indexOf(this.CORRUPTED_COOKIE_PATTERN)>-1&&(this.disregardUser=!0,this.logErrorToServer("checkCorruptedCookie#corrupted-cookie-check","","oldPriorExposuresStr: "+oldPriorExposuresStr,"newPriorExposuresStr: "+this.priorExposuresStr,10))}catch(e){this.disregardUser=!0,this.logErrorToServer("checkCorruptedCookie",e,"",100)}},updateObsoleteExposures:function(){var e=!1,t;return t=this.GLOBAL_TYPE,e=this.obsoleteHelper(t,this.expTypeKey(t))||e,t=this.LOCAL_TYPE,e=this.obsoleteHelper(t,this.expTypeKey(t))||e,e},obsoleteHelper:function(e,t){var n=!1;try{for(var r in this.priorExposuresJson[e]){var i=this.sData.experiments_rules[t][r],s=new Date(parseInt(this.priorExposuresJson[e][r].expTime)*1e3),o;i?new Date(i.start_time*1e3)>s&&(this.burnedExps[r]=!0):(o=new Date(s.getTime()+this.DELETE_OBSOLETE_EXPIRATION),new Date>o&&(delete this.priorExposuresJson[e][r],n=!0))}}catch(u){this.disregardUser=!0,this.logErrorToServer("obsoleteHelper",u,"",100)}return n},updateObsoleteFutureCookie:function(){var e=this.existingFutureExp.expObject,t,n;e&&(this.sData.experiments_rules[this.expTypeKey(e.expType)][e.expId]||(n=new Date(parseInt(e.expTime*1e3)),t=new Date(n.getTime()+this.DELETE_OBSOLETE_EXPIRATION),new Date>t&&this._setCookie(this.FUTURE_ALLOCATION_KEY,"")))},findMatches:function(e){var t=this.sData.experiments_rules,n={g:[],l:[]},r,i,s,o;s=this.cleanUrl(window.location.host+window.location.pathname),o=this.cleanUrl(window.location.host+window.location.pathname+window.location.search),t[e+"_l_exps_per_resource"].page_id&&(n.g=n.g.concat(t[e+"_g_exps_per_resource"].page_id[this.currPageId]||[]),n.l=n.l.concat(t[e+"_l_exps_per_resource"].page_id[this.currPageId]||[])),t[e+"_l_exps_per_resource"].loose&&(n.g=n.g.concat(t[e+"_g_exps_per_resource"].loose[s]||[]),n.l=n.l.concat(t[e+"_l_exps_per_resource"].loose[s]||[])),t[e+"_l_exps_per_resource"].exact&&(n.g=n.g.concat(t[e+"_g_exps_per_resource"].exact[o]||[]),n.l=n.l.concat(t[e+"_l_exps_per_resource"].exact[o]||[]));if(t[e+"_l_exps_per_resource"].page_tag)for(var u in this.pageTags)n.g=n.g.concat(t[e+"_g_exps_per_resource"].page_tag[this.pageTags[u]]||[]),n.l=n.l.concat(t[e+"_l_exps_per_resource"].page_tag[this.pageTags[u]]||[]);return n},findMatchingPriors:function(e){var t=this.findMatchingPriorsHelper(e.g,this.GLOBAL_TYPE),n=this.findMatchingPriorsHelper(e.l,this.LOCAL_TYPE),r={matches:[],matchesArrsNoPriors:{g:[],l:[]}};return r.matches=t.matches.concat(n.matches),r.matchesArrsNoPriors.g=t.matchesNoPriors,r.matchesArrsNoPriors.l=n.matchesNoPriors,r},findMatchingPriorsHelper:function(e,t){var n={matches:[],matchesNoPriors:[]};for(var r in e){var i=e[r],s=this.priorExposuresJson[t][i];s?n.matches.push(s):n.matchesNoPriors.push(i)}return n},logActivities:function(e){try{var t=window.location.protocol+"//"+this.sData.general_data.sliced_api_host+this.POST_ACTIVITY_PATH.replace("{pid}",this.uPUId);jQuery.ajax({url:t,headers:{"Sliced-Token":this.slicedToken},type:"post",data:e,dataType:"json",success:function(e,t,n){},error:function(e,t,n){}})}catch(n){this.logErrorToServer("logActivities",n,"data: "+e)}},markHelper:function(e,t){if(this.excludeUserFromReport||this.disregardUser||!this.supportsLocalStorage)return;try{var n,r;if(this.burnedExps[parseInt(e.expId)])return;r=typeof e.amount=="undefined"?1:e.amount,n={type:t,experiment_id:e.expId,experiment_variation:e.varId,event_name:e.eventName,amount:r,trigger_time:this.getCurrTimeInSecs(),u_puid:this.uPUId},this.enqueueActivity(this.EVENTS_STORAGE_KEY,n)}catch(i){this.logErrorToServer("markHelper",i,"markArgs: "+e+", markType: "+t)}},enqueueExposure:function(e){if(this.excludeUserFromReport||this.disregardUser||!this.supportsLocalStorage)return;var t;try{t={type:"experiment_exposure",experiment_id:e.expId,experiment_variation:e.varId,exposed_at:e.expTime,u_puid:this.uPUId,exposed_experiments:this.priorExposuresStr},this.enqueueActivity(this.EXPOSURES_STORAGE_KEY,t)}catch(n){this.logErrorToServer("enqueueExposure",n,"",2)}},enqueueActivity:function(e,t){var n,r;try{n=localStorage[e],r=n?JSON.parse(n):[],r.push(t),localStorage[e]=JSON.stringify(r)}catch(i){this.logErrorToServer("enqueueActivity",i,"storage key: "+e,2)}},dispatchMarkedEvents:function(){this.dispatchHelper(this.EVENTS_STORAGE_KEY)},dispatchExposures:function(){this.dispatchHelper(this.EXPOSURES_STORAGE_KEY)},dispatchHelper:function(e){if(!this.supportsLocalStorage)return;var t,n,r;try{t=localStorage[e],n=t?JSON.parse(t):[],n.length>0&&(r={activities:n},this.logActivities(r),localStorage[e]="[]")}catch(i){this.logErrorToServer("dispatchHelper",i,"storage key: "+e,2)}},addJsAndCssOnTheFly:function(e,t){try{e&&(jQuery("#sliced-custom-css").remove(),jQuery('<style type="text/css" id="sliced-custom-css">'+e+"</style>").appendTo("head")),t&&(jQuery("#sliced-custom-js").remove(),jQuery('<script type="text/javascript" id="sliced-custom-js">'+t+"</script>").appendTo("head"))}catch(n){this.disregardUser=!0,this.logErrorToServer("addJsAndCssOnTheFly",n,"css: "+e+", js: "+t,1)}},logErrorToServer:function(e,t,n,r){var i=Math.floor(Math.random()*100+1),s="",o,u,a,f=r||this.ERROR_LOGGING_PERCENTAGE;if(i>f||this.isPreview||this.isEditorMode)return;try{s=JSON.stringify(this,["mPUId","uPUId","priorExposuresStr","priorExposuresJson","isFirstPUIdAllocation","currPageId","pageTags","currExperiments"])}catch(l){}o="method - "+e+", extraInfo - "+n+",error - "+t+", slicedFields - "+s,u={url:window.location.href,error_message:"Sliced-client-side error. info: "+o,file:"sliced.js"},a="http://jen.srv.fiverr.com/jen.js",jQuery.ajax({url:a,type:"get",data:u,dataType:"jsonp",success:function(e,t,n){},error:function(e,t,n){}})},setPuidCookie:function(e,t){this._setCookie(this.PUID_KEY,e+this.COOKIE_GLOBAL_DELIMITER+t+this.COOKIE_GLOBAL_DELIMITER+"0")},parsePriorExposures:function(){this.priorExposuresStr=this._readCookie(this.PRIOR_EXPOSURES_KEY);var e={g:{},l:{}};if(!this.priorExposuresStr){this.priorExposuresJson=e;return}try{var n=this.priorExposuresStr.split(this.COOKIE_EXPS_DELIMITER);for(var r in n){var i=n[r].split(this.COOKIE_GLOBAL_DELIMITER),s=new t(this,i[0],i[1],i[2],i[3],!1);e[i[0]][i[1]]=s,s.expType==this.GLOBAL_TYPE?this.hasPriorGlobal=!0:s.expType==this.LOCAL_TYPE&&(this.hasPriorLocal=!0)}}catch(o){this.disregardUser=!0,this.logErrorToServer("parsePriorExposures",o,"priorExposuresStr: "+this.priorExposuresStr,2),this.priorExposuresStr="",this.priorExposuresJson={g:{},l:{}},this._setCookie(this.PRIOR_EXPOSURES_KEY,"")}this.priorExposuresJson=e},parseFutureAllocation:function(){try{var e=this._readCookie(this.FUTURE_ALLOCATION_KEY),n;if(e){if(this.priorExposuresStr){this.logErrorToServer("parseFutureAllocation found conflicting cookies - exposures and future","","futureAllocationStr: "+e+", priorExposuresStr: "+this.priorExposuresStr,1),jQuery.removeCookie(this.FUTURE_ALLOCATION_KEY);return}n=e.split(this.COOKIE_GLOBAL_DELIMITER),this.existingFutureExp.empty=!1,this.existingFutureExp.expType=n[0],this.existingFutureExp.expType==this.GLOBAL_TYPE&&(this.existingFutureExp.expObject=new t(this,n[0],n[1],n[2],n[3],!0,n[4]))}}catch(r){this.logErrorToServer("parseFutureAllocation",r,"")}},parseParticipantCookie:function(){var e=this._readCookie(this.PUID_KEY),t;e?(t=e.split(this.COOKIE_GLOBAL_DELIMITER),this.uPUId=t[0]):(this.uPUId=this.generateUPUId(),this.isFirstPUIdAllocation=!0)},convertExpObjectToStr:function(e){var t=[e.expType,e.expId,e.varId,e.expTime];return t.join(this.COOKIE_GLOBAL_DELIMITER)},constructPriorsStrFromJson:function(e){var t=[];return this.constructPriorsHelper(t,e.g),this.constructPriorsHelper(t,e.l),t.join(this.COOKIE_EXPS_DELIMITER)},constructPriorsHelper:function(e,t){for(var n in t){var r=t[n];expStr=this.convertExpObjectToStr(r),e.push(expStr)}},generateUPUId:function(){return"xxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})},generateMPUId:function(){var e;try{var t=Math.random();t==0&&this.logErrorToServer("randSource is 0.","","",100),e=Math.floor(t*this.MAX_RAND)}catch(n){this.disregardUser=!0,this.logErrorToServer("generateMPUId",n,"",100)}return e},getCurrTimeInSecs:function(){return parseInt((new Date).getTime()/1e3)},cleanUrl:function(e){var t=e.toLowerCase(),n;return t.charAt(t.length-1)=="/"&&(t=t.substring(0,t.length-1)),n=t.indexOf("#"),n>-1&&(t=t.substring(0,n)),t.substring(0,4)=="www."&&(t=t.substring(4)),t},expTypeKey:function(e){return e+"_exps"},_loadPageVar:function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)"),r=n.exec(e);return r==null?"":decodeURIComponent(r[1].replace(/\+/g," "))},_readCookie:function(e){try{return jQuery.cookie(e)}catch(t){this.disregardUser=!0,this.logErrorToServer("_readCookiekie",t,"",2)}},_setCookie:function(e,t){try{jQuery.cookie(e,t,{expires:365,path:"/"})}catch(n){this.disregardUser=!0,this.logErrorToServer("_setCookie",n,"cookieName: "+t+", "+t,2)}}},n={init:function(){window.addEventListener("message",function(t){var n=sliced.SlicedHelpers.getDomainWithoutQuery(t.origin);if(n==="sliced.fiverr.com"||n==="sliced-dev.fiverr.com"||n==="fiverr-dev.com")if(t.data.type="apply"){var r=t.data.custom_css?JSON.parse(t.data.custom_css):"",i=t.data.custom_js?JSON.parse(t.data.custom_js):"";e.addJsAndCssOnTheFly(r,i)}else(t.data.type="pageId")&&t.source.postMessage({type:"pageId",pageId:sliced.pageId},t.origin)},!1)}};r(e)}function t(){sliced.SlicedHelpers={loadScript:function(e,t){var n=document.createElement("script");n.type="text/javascript",n.setAttribute("src",e),n.onload=t,n.onreadystatechange=function(){(this.readyState=="complete"||this.readyState=="loaded")&&t()},document.getElementsByTagName("head")[0].appendChild(n)},getDomainWithoutQuery:function(e){var t=document.createElement("a");return t.href=e,t.hostname},getUserAgent:function(){if(typeof navigator!="undefined")return navigator.userAgent},initJQCookie:function(){(function(e){typeof define=="function"&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function r(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function s(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{e=decodeURIComponent(e.replace(t," "))}catch(n){return}try{return u.json?JSON.parse(e):e}catch(n){}}function o(t,n){var r=u.raw?t:s(t);return e.isFunction(n)?n(r):r}var t=/\+/g,u=e.cookie=function(t,s,a){if(s!==undefined&&!e.isFunction(s)){a=e.extend({},u.defaults,a);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setDate(l.getDate()+f)}return document.cookie=[n(t),"=",i(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=t?undefined:{},h=document.cookie?document.cookie.split("; "):[];for(var p=0,d=h.length;p<d;p++){var v=h[p].split("="),m=r(v.shift()),g=v.join("=");if(t&&t===m){c=o(g,s);break}!t&&(g=o(g))!==undefined&&(c[m]=g)}return c};u.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==undefined?(e.cookie(t,"",e.extend({},n,{expires:-1})),!0):!1}})}}}t(),typeof jQuery=="undefined"?sliced.SlicedHelpers.loadScript("//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js",e):e()}();